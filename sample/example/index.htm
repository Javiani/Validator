<!DOCTYPE HTML>
<html>
	<head>

		<title>Validator 2.0</title>
		<meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.5/cosmo/bootstrap.min.css" />

		<script src="//cdnjs.cloudflare.com/ajax/libs/zepto/1.1.4/zepto.min.js"></script>

		<script src="//rawgit.com/Javiani/Validator/master/validator.js" type="text/javascript"></script>
		<script src="//rawgit.com/Javiani/Validator/master/sample/rules.js" type="text/javascript"></script>
		<script src="//rawgit.com/Javiani/Validator/master/sample/messages.js" type="text/javascript"></script>

	</head>
	<body>

		<main class="container">

			<header class="jumbotron">
				<h1>Validator</h1>
				<p>A simple validation example..</p>
			</header>
			<section class="row">
				<form action="/" novalidate class="col-md-5">

					<div class="form-group">
						<label for="name" class="col-lg-2 control-label">Name</label>
						<div class="col-lg-10">
							<input type="text" class="required form-control" name="name" id="name" placeholder="Your name..." />
						</div>
					</div>
					<div class="form-group">
						<label for="age" class="col-lg-2 control-label">Age</label>
						<div class="col-lg-10">
							<input type="text" class="required number form-control" name="age" id="age" placeholder="Your age..." />
						</div>
					</div>
					<div class="form-group">
						<label for="age" class="col-lg-2 control-label">Email</label>
						<div class="col-lg-10">
							<input type="email" class="required form-control" name="email" id="email" placeholder="Your email..." />
						</div>
					</div>
					<div class="form-group">
						<label for="file" class="col-lg-2 control-label">File</label>
						<div class="col-lg-10">
							<input type="text" class="form-control" name="file" id="file" />
						</div>
					</div>
					<div class="form-group">
						<button type="submit" class="btn btn-primary">Enviar</button>
					</div>
				</form>
			</section>

		</main>


		<script type="text/javascript">

			var v, form = $('form'), input = form.find('input');

			v = Validator.create({ holder :form });

			v.add( '.required' , { rules :{ required :true } });
			v.add( '.number' , { rules :{ number :true } });
			v.add( 'input[type=email]' , { rules :{ email :true } });
			v.add( 'input[type=file]' , { rules :{ accept :'jpg|png|gif' } });

			v.on('validator:error', function(err){

				//Clearing errors
				clear_errors();
				$.each( err.list, error);
				console.log(err);
			});

			//Validation triggers

			form.on('submit', function(){
				return v.validate();
			});

			input.on('blur', function(){

				var element = v.test(this);

				if(!element.is_valid){
					error.call( element );
				}
				else{
					$(this).parents('.form-group').removeClass('has-error');
				}
			});

			function clear_errors(holder){
				(holder || form).find('.has-error').removeClass('has-error');
			}

			function error(){
				var element = $(this.element);
					element.parents('.form-group').addClass('has-error')
				element.prop('placeholder', this.messages.list[0]);
			}

		</script>

	</body>
</html>
